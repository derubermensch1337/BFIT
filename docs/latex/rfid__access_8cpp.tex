\doxysection{src/\+rfid\+\_\+access.cpp File Reference}
\hypertarget{rfid__access_8cpp}{}\label{rfid__access_8cpp}\index{src/rfid\_access.cpp@{src/rfid\_access.cpp}}


File used to setup the RFID.  


{\ttfamily \+\#include "{}rfid\+\_\+access.\+h"{}}\newline
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\doxymbox{\hyperlink{rfid__access_8h_aff8e30d9f71191b67c6c684478ab46d4}{RFIDcommand}} \doxymbox{\hyperlink{rfid__access_8cpp_a4a66436c7fbab3185e8fe050312fcea6}{check\+\_\+command}} ()
\begin{DoxyCompactList}\small\item\em brief Reads a command from the serial interface and maps it to an \doxylink{rfid__access_8h_aff8e30d9f71191b67c6c684478ab46d4}{RFIDcommand}. \end{DoxyCompactList}\item 
void \doxymbox{\hyperlink{rfid__access_8cpp_a8e4bb51959939a9527c2f592cb742f84}{setup\+\_\+\+RFID\+\_\+reader}} (MFRC522 \&\doxymbox{\hyperlink{main_8cpp_a7cc33c6b9b1bd83e02864b1eb0530a63}{rfid}})
\begin{DoxyCompactList}\small\item\em Initializes SPI and the MFRC522 RFID reader. \end{DoxyCompactList}\item 
bool \doxymbox{\hyperlink{rfid__access_8cpp_abc2ed4592afe3616dfab8e42c9d3c99c}{add\+\_\+user}} (MFRC522 \&\doxymbox{\hyperlink{main_8cpp_a7cc33c6b9b1bd83e02864b1eb0530a63}{rfid}})
\begin{DoxyCompactList}\small\item\em Adds a new user by reading room number and scanning an RFID tag. \end{DoxyCompactList}\item 
bool \doxymbox{\hyperlink{rfid__access_8cpp_ad134e233e23721f4762373cf2e781a6d}{validate\+\_\+rfid}} (MFRC522 my\+RFID)
\begin{DoxyCompactList}\small\item\em Validates an RFID tag against the registered user database. \end{DoxyCompactList}\item 
bool \doxymbox{\hyperlink{rfid__access_8cpp_ab4c09e9a60679c0c9ade2946fbf583ad}{compare\+\_\+\+UID}} (byte \texorpdfstring{$\ast$}{*}uid1, byte \texorpdfstring{$\ast$}{*}uid2)
\begin{DoxyCompactList}\small\item\em Compares two RFID UIDs. \end{DoxyCompactList}\item 
bool \doxymbox{\hyperlink{rfid__access_8cpp_a0add745e34488b9c793c8a45308228b3}{read\+\_\+\+RFID\+\_\+tag}} (MFRC522 \&\doxymbox{\hyperlink{main_8cpp_a7cc33c6b9b1bd83e02864b1eb0530a63}{rfid}}, byte \texorpdfstring{$\ast$}{*}uid\+Buffer)
\begin{DoxyCompactList}\small\item\em Reads an RFID tag UID from the MFRC522 reader. \end{DoxyCompactList}\item 
void \doxymbox{\hyperlink{rfid__access_8cpp_adf824566d577c7c8088aa454c831f906}{display\+\_\+commands}} ()
\begin{DoxyCompactList}\small\item\em Prints the available serial commands. \end{DoxyCompactList}\item 
void \doxymbox{\hyperlink{rfid__access_8cpp_a301fdf0545d6da25fbe5ed4abcc6f075}{display\+\_\+commands\+\_\+um}} ()
\begin{DoxyCompactList}\small\item\em Prints the available serial commands for user-\/management mode. \end{DoxyCompactList}\item 
void \doxymbox{\hyperlink{rfid__access_8cpp_aee72324df2418506e4d0fb015d1500be}{rfid\+\_\+set\+\_\+last\+\_\+uid}} (const byte \texorpdfstring{$\ast$}{*}uid\+In)
\begin{DoxyCompactList}\small\item\em Function for storing the last used RFID. \end{DoxyCompactList}\item 
bool \doxymbox{\hyperlink{rfid__access_8cpp_a38522f06db7c720fa309716c24f5fb57}{rfid\+\_\+get\+\_\+last\+\_\+uid}} (byte \texorpdfstring{$\ast$}{*}uid\+Out)
\begin{DoxyCompactList}\small\item\em Function for restoring the last used RFID. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\doxymbox{\hyperlink{struct_user}{User}} \doxymbox{\hyperlink{rfid__access_8cpp_ad1ade64ec1f94c9ff0835615a52a941a}{users}} \+[\doxymbox{\hyperlink{rfid__access_8h_a251d94cd24a2ca3369fc3f8eca8c19ae}{MAX\+\_\+\+ROOMS}}]\+
\begin{DoxyCompactList}\small\item\em Global user database array. \end{DoxyCompactList}\item 
int \doxymbox{\hyperlink{rfid__access_8cpp_a23424c8ba4bf5c99fbb09f4d86787465}{user\+Count}} = 0
\begin{DoxyCompactList}\small\item\em Number of currently registered users. \end{DoxyCompactList}\item 
static byte \doxymbox{\hyperlink{rfid__access_8cpp_a742d4f0d334ff2a1eb3ccd9b99970bcf}{last\+UID}} \+[\doxymbox{\hyperlink{rfid__access_8h_a685be41cf665c6412e45be53ca20543f}{UID\+\_\+\+LENGTH}}]\+
\item 
static bool \doxymbox{\hyperlink{rfid__access_8cpp_a17948a54fedc435a57c485ea53175ca0}{has\+UID}} = false
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\begin{DoxyAuthor}{Author}
Amal Araweelo Almis 

Baldur G. Toftegaard 
\end{DoxyAuthor}


\label{doc-func-members}
\Hypertarget{rfid__access_8cpp_doc-func-members}
\doxysubsection{Function Documentation}
\Hypertarget{rfid__access_8cpp_abc2ed4592afe3616dfab8e42c9d3c99c}\index{rfid\_access.cpp@{rfid\_access.cpp}!add\_user@{add\_user}}
\index{add\_user@{add\_user}!rfid\_access.cpp@{rfid\_access.cpp}}
\doxysubsubsection{\texorpdfstring{add\_user()}{add\_user()}}
{\footnotesize\ttfamily \label{rfid__access_8cpp_abc2ed4592afe3616dfab8e42c9d3c99c} 
bool add\+\_\+user (\begin{DoxyParamCaption}\item[{MFRC522 \&}]{rfid}{}\end{DoxyParamCaption})}


\begin{DoxyParams}{Parameters}
{\em \doxylink{main_8cpp_a7cc33c6b9b1bd83e02864b1eb0530a63}{rfid}} & An instance of a MFRC522 object. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true \doxylink{struct_user}{User} was added. 

false \doxylink{struct_user}{User} was not added. 
\end{DoxyReturn}
\Hypertarget{rfid__access_8cpp_a4a66436c7fbab3185e8fe050312fcea6}\index{rfid\_access.cpp@{rfid\_access.cpp}!check\_command@{check\_command}}
\index{check\_command@{check\_command}!rfid\_access.cpp@{rfid\_access.cpp}}
\doxysubsubsection{\texorpdfstring{check\_command()}{check\_command()}}
{\footnotesize\ttfamily \label{rfid__access_8cpp_a4a66436c7fbab3185e8fe050312fcea6} 
\doxymbox{\hyperlink{rfid__access_8h_aff8e30d9f71191b67c6c684478ab46d4}{RFIDcommand}} check\+\_\+command (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}

\begin{DoxyReturn}{Returns}
\doxylink{rfid__access_8h_aff8e30d9f71191b67c6c684478ab46d4}{RFIDcommand} 
\end{DoxyReturn}
\Hypertarget{rfid__access_8cpp_ab4c09e9a60679c0c9ade2946fbf583ad}\index{rfid\_access.cpp@{rfid\_access.cpp}!compare\_UID@{compare\_UID}}
\index{compare\_UID@{compare\_UID}!rfid\_access.cpp@{rfid\_access.cpp}}
\doxysubsubsection{\texorpdfstring{compare\_UID()}{compare\_UID()}}
{\footnotesize\ttfamily \label{rfid__access_8cpp_ab4c09e9a60679c0c9ade2946fbf583ad} 
bool compare\+\_\+\+UID (\begin{DoxyParamCaption}\item[{byte \texorpdfstring{$\ast$}{*}}]{uid1}{, }\item[{byte \texorpdfstring{$\ast$}{*}}]{uid2}{}\end{DoxyParamCaption})}


\begin{DoxyParams}{Parameters}
{\em uid1} & The first uid number. \\
\hline
{\em uid2} & The uid number we want to dompare it to. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true Numbers match. 

false NUmbers do not match. 
\end{DoxyReturn}
\Hypertarget{rfid__access_8cpp_adf824566d577c7c8088aa454c831f906}\index{rfid\_access.cpp@{rfid\_access.cpp}!display\_commands@{display\_commands}}
\index{display\_commands@{display\_commands}!rfid\_access.cpp@{rfid\_access.cpp}}
\doxysubsubsection{\texorpdfstring{display\_commands()}{display\_commands()}}
{\footnotesize\ttfamily \label{rfid__access_8cpp_adf824566d577c7c8088aa454c831f906} 
void display\+\_\+commands (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}

\Hypertarget{rfid__access_8cpp_a301fdf0545d6da25fbe5ed4abcc6f075}\index{rfid\_access.cpp@{rfid\_access.cpp}!display\_commands\_um@{display\_commands\_um}}
\index{display\_commands\_um@{display\_commands\_um}!rfid\_access.cpp@{rfid\_access.cpp}}
\doxysubsubsection{\texorpdfstring{display\_commands\_um()}{display\_commands\_um()}}
{\footnotesize\ttfamily \label{rfid__access_8cpp_a301fdf0545d6da25fbe5ed4abcc6f075} 
void display\+\_\+commands\+\_\+um (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}

\Hypertarget{rfid__access_8cpp_a0add745e34488b9c793c8a45308228b3}\index{rfid\_access.cpp@{rfid\_access.cpp}!read\_RFID\_tag@{read\_RFID\_tag}}
\index{read\_RFID\_tag@{read\_RFID\_tag}!rfid\_access.cpp@{rfid\_access.cpp}}
\doxysubsubsection{\texorpdfstring{read\_RFID\_tag()}{read\_RFID\_tag()}}
{\footnotesize\ttfamily \label{rfid__access_8cpp_a0add745e34488b9c793c8a45308228b3} 
bool read\+\_\+\+RFID\+\_\+tag (\begin{DoxyParamCaption}\item[{MFRC522 \&}]{rfid}{, }\item[{byte \texorpdfstring{$\ast$}{*}}]{uid\+Buffer}{}\end{DoxyParamCaption})}


\begin{DoxyParams}{Parameters}
{\em \doxylink{main_8cpp_a7cc33c6b9b1bd83e02864b1eb0530a63}{rfid}} & An instance of a MFRC522 object \\
\hline
{\em uid\+Buffer} & An array where the UID is saved to \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true RFID tag was read. 

false No RFID tag was read. 
\end{DoxyReturn}
\Hypertarget{rfid__access_8cpp_a38522f06db7c720fa309716c24f5fb57}\index{rfid\_access.cpp@{rfid\_access.cpp}!rfid\_get\_last\_uid@{rfid\_get\_last\_uid}}
\index{rfid\_get\_last\_uid@{rfid\_get\_last\_uid}!rfid\_access.cpp@{rfid\_access.cpp}}
\doxysubsubsection{\texorpdfstring{rfid\_get\_last\_uid()}{rfid\_get\_last\_uid()}}
{\footnotesize\ttfamily \label{rfid__access_8cpp_a38522f06db7c720fa309716c24f5fb57} 
bool rfid\+\_\+get\+\_\+last\+\_\+uid (\begin{DoxyParamCaption}\item[{byte \texorpdfstring{$\ast$}{*}}]{uid\+Out}{}\end{DoxyParamCaption})}


\begin{DoxyParams}{Parameters}
{\em uid\+Out} & Pointer to user it. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true There was an last uid to retrive. 

false No last uid was retrived. 
\end{DoxyReturn}
\Hypertarget{rfid__access_8cpp_aee72324df2418506e4d0fb015d1500be}\index{rfid\_access.cpp@{rfid\_access.cpp}!rfid\_set\_last\_uid@{rfid\_set\_last\_uid}}
\index{rfid\_set\_last\_uid@{rfid\_set\_last\_uid}!rfid\_access.cpp@{rfid\_access.cpp}}
\doxysubsubsection{\texorpdfstring{rfid\_set\_last\_uid()}{rfid\_set\_last\_uid()}}
{\footnotesize\ttfamily \label{rfid__access_8cpp_aee72324df2418506e4d0fb015d1500be} 
void rfid\+\_\+set\+\_\+last\+\_\+uid (\begin{DoxyParamCaption}\item[{const byte \texorpdfstring{$\ast$}{*}}]{uid\+In}{}\end{DoxyParamCaption})}


\begin{DoxyParams}{Parameters}
{\em uid\+Out} & Pointer to user it. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true Stored last used uid. 

false Last uid was not stored 
\end{DoxyReturn}
\Hypertarget{rfid__access_8cpp_a8e4bb51959939a9527c2f592cb742f84}\index{rfid\_access.cpp@{rfid\_access.cpp}!setup\_RFID\_reader@{setup\_RFID\_reader}}
\index{setup\_RFID\_reader@{setup\_RFID\_reader}!rfid\_access.cpp@{rfid\_access.cpp}}
\doxysubsubsection{\texorpdfstring{setup\_RFID\_reader()}{setup\_RFID\_reader()}}
{\footnotesize\ttfamily \label{rfid__access_8cpp_a8e4bb51959939a9527c2f592cb742f84} 
void setup\+\_\+\+RFID\+\_\+reader (\begin{DoxyParamCaption}\item[{MFRC522 \&}]{rfid}{}\end{DoxyParamCaption})}


\begin{DoxyParams}{Parameters}
{\em \doxylink{main_8cpp_a7cc33c6b9b1bd83e02864b1eb0530a63}{rfid}} & An instance of a MFRC522 object \\
\hline
\end{DoxyParams}
\Hypertarget{rfid__access_8cpp_ad134e233e23721f4762373cf2e781a6d}\index{rfid\_access.cpp@{rfid\_access.cpp}!validate\_rfid@{validate\_rfid}}
\index{validate\_rfid@{validate\_rfid}!rfid\_access.cpp@{rfid\_access.cpp}}
\doxysubsubsection{\texorpdfstring{validate\_rfid()}{validate\_rfid()}}
{\footnotesize\ttfamily \label{rfid__access_8cpp_ad134e233e23721f4762373cf2e781a6d} 
bool validate\+\_\+rfid (\begin{DoxyParamCaption}\item[{MFRC522}]{my\+RFID}{}\end{DoxyParamCaption})}


\begin{DoxyParams}{Parameters}
{\em my\+RFID} & An instance of a MFRC522 object \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true The RFID was a match. 

false There was no matching RFID in the database. 
\end{DoxyReturn}


\label{doc-var-members}
\Hypertarget{rfid__access_8cpp_doc-var-members}
\doxysubsection{Variable Documentation}
\Hypertarget{rfid__access_8cpp_a17948a54fedc435a57c485ea53175ca0}\index{rfid\_access.cpp@{rfid\_access.cpp}!hasUID@{hasUID}}
\index{hasUID@{hasUID}!rfid\_access.cpp@{rfid\_access.cpp}}
\doxysubsubsection{\texorpdfstring{hasUID}{hasUID}}
{\footnotesize\ttfamily \label{rfid__access_8cpp_a17948a54fedc435a57c485ea53175ca0} 
bool has\+UID = false\hspace{0.3cm}{\ttfamily [static]}}

\Hypertarget{rfid__access_8cpp_a742d4f0d334ff2a1eb3ccd9b99970bcf}\index{rfid\_access.cpp@{rfid\_access.cpp}!lastUID@{lastUID}}
\index{lastUID@{lastUID}!rfid\_access.cpp@{rfid\_access.cpp}}
\doxysubsubsection{\texorpdfstring{lastUID}{lastUID}}
{\footnotesize\ttfamily \label{rfid__access_8cpp_a742d4f0d334ff2a1eb3ccd9b99970bcf} 
byte last\+UID\+[\doxymbox{\hyperlink{rfid__access_8h_a685be41cf665c6412e45be53ca20543f}{UID\+\_\+\+LENGTH}}]\+\hspace{0.3cm}{\ttfamily [static]}}

\Hypertarget{rfid__access_8cpp_a23424c8ba4bf5c99fbb09f4d86787465}\index{rfid\_access.cpp@{rfid\_access.cpp}!userCount@{userCount}}
\index{userCount@{userCount}!rfid\_access.cpp@{rfid\_access.cpp}}
\doxysubsubsection{\texorpdfstring{userCount}{userCount}}
{\footnotesize\ttfamily \label{rfid__access_8cpp_a23424c8ba4bf5c99fbb09f4d86787465} 
int user\+Count = 0}

\Hypertarget{rfid__access_8cpp_ad1ade64ec1f94c9ff0835615a52a941a}\index{rfid\_access.cpp@{rfid\_access.cpp}!users@{users}}
\index{users@{users}!rfid\_access.cpp@{rfid\_access.cpp}}
\doxysubsubsection{\texorpdfstring{users}{users}}
{\footnotesize\ttfamily \label{rfid__access_8cpp_ad1ade64ec1f94c9ff0835615a52a941a} 
\doxymbox{\hyperlink{struct_user}{User}} users\+[\doxymbox{\hyperlink{rfid__access_8h_a251d94cd24a2ca3369fc3f8eca8c19ae}{MAX\+\_\+\+ROOMS}}]\+}

